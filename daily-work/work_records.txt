provision job

                - scripts/setup_venv.sh
                - scripts/install_libvirt_ci.sh
                - scripts/provision_slave.sh
                - scripts/clear_venv.sh

runtest job

                - scripts/setup_system_venv.sh
                - scripts/install_libvirt_ci.sh
                - scripts/runtest.sh
                - scripts/keep_latest_venv.sh
                - scripts/setup_venv.sh
                - scripts/install_libvirt_ci.sh
                - scripts/report_result_to_jira.sh
                - scripts/report_result_to_dashboard.sh
                - scripts/submit_metrics.sh
                - scripts/report_result_to_metadash.sh
                - scripts/clear_venv.sh
image build
                - scripts/setup_system_venv.sh
                - scripts/install_libvirt_ci.sh
                - scripts/build_image.sh
                - scripts/clear_venv.sh

0. update job_trigger to send out virt_module_stream info !!!!

1. update the trello card and make meeting with yukin, make sure the bugzilla/blacklist workflow

2. meeting with lnie, how to develop libvirt-python test job in fedora
    - config shell script
    - config test-api custom-repo config

3. add a trello card to investigate the failed update of failure summary


virt-install -n image-builder -r 2048 --vcpus=2 --disk path=/var/lib/libvirt/images/image-builder.qcow2 --location=http://download.eng.bos.redhat.com/fedmsg/dumpdata/primary//Fedora-Rawhide-20201108.n.0/Server/x86_64/os/ --disk /tmp/ks.iso,device=cdrom -x "ks=cdrom:ks.cfg" --console pty --nographics --extra-args "console=ttyS0,115200" --noreboot --wait -1



cross TB
--------
1. 确认报销流程邮件


Fedora image build job
---------------------




S3 team meeting - Short term to do list
---------------------------------------
mojo ---> source migration !!

All hands - One OCP deploy !!!!

Read and Learn python micro service framework nameko

3. send email to explanation the absent of RHU lessons in plan

Novermber 1 on 1
------------
yukin work - trello card following up
work follow up - feed back follow up




-------------------
Giving and Receiving Feedback for Associates (vILT) - Aug 19th
right for redhat interview - Sep11 - 12 21:00 - 24:00

QE presentation skills
learning pack - Participate in the Virtual Learning Pack
    - getting things done



resource training - replace mojo !!!!
RingCentral - IT
Virtual Delivery Offerings!

add fedora ci job
    - add image build job for fedora
        - use Fedora-Rawhide(Fedora-34)
        - upgrade ansible from 2.6.15 to 2.8.14
        - install java-1.8.0-openjdk and set system default env to java-1.8.0
        
    - update image_build for fedora
                - scripts/setup_system_venv.sh
                - scripts/install_libvirt_ci.sh
                - scripts/build_image.sh
                - scripts/clear_venv.sh
    - ci provision
        - change KS_APPEND in fill_ks_appends
        - change distro_variant in fill_distro_requires
        - change distro and version info in prepare_system.yaml
    - ci build-guest-image
        - 
        - update kickstart file based on OS version
    - ci update-tree










in process tasks
----------------
1. set the default image and network check for all runners
    - perl-sys-virt - gating pass

2. update automated test match - 

5. git repo install issue
    - change shell script to python and add gitlab as the backup git repo


Week Aug30 & Week Sep6

Libvirt CI requirement

Libvirt CI failure fix and Jenkins job maintains

Debug and fix automation case jira issue

Libvirt ci document update


- how to login the jenkins slave node
        - dev/debug libvirt-ci tool scripts

- fix jira isse LIBVIRTAT-5337



Libvirt CI debug workflow
-------------------------
当libvirt-ci 没有正常运行，如何debug and 如何手动模拟消息，触发测试 ！！



CI document updating
--------------------
support to reserve two machines or vms of different RHEL version


libvirt ci document - https://libvirt-ci-docs.ocp.libvirt.redhat.com/index.html
document update phase one - March 15th
    libvirt CI job trigger scenario
    list what message will trigger what test job
    list what test job is triggered manually
    Libvirt CI Test Resource
    libvirt CI service & repos
    Libvirt CI testing Metadata 
how to understand & define CI parameters in jobs.yaml and CI metadata google sheet

document update phase two
    libvirt CI runner

please file issue in https://gitlab.cee.redhat.com/libvirt-auto/libvirt-ci/issues
libvirt-ci-tips
https://docs.google.com/document/d/14FVzzhn3OXY5rRDMDwjwybntOlxL9Vw99INPPZsukQk/edit#


Libvirt CI resource
1. beaker machine
2. openstack vm
3. module and package repo

how to add package into libvirt-ci repo
1. add package into "Watching Packages" of page Groups in libvirt ci metadata
2. add package name into "install-pkgs" of specific job in jobs.yaml





Strategic Thinking - linkedin learning
--------------------------------------
0. what you should know
    - on one get this skill at school
    - no prerequisites for this skill, just keep open mind
    - you have to make time for strategic thinking

1. Strategic thinking - the big picture
    - embrace the mindset of strategic thinking
        - continously strategic thinking - re-evaluating new information and adapting accordingly
        - leverage the following activities to make strategic mindset
            - questioning assumption - why do we do it that way?
            - observing - observe the big picture
            - reflecting - reflect on what we've experienced
    - strategy: not just for corporations
        - align your strategy with what makes a difference to the organization
        - personal career plan/action - think of your career with a long term strategic view
            - where do i want to be in threee or five years?
            - am i on that path now?
            - what can i do to increase the change of that outcome
            - learning more skill/get more working experience/volunteering to lead a committee
    - the sequence of strategy
        - 



    - make time to be strategic

2. Developing your strategic thinking
    - consider the future and learn from the past
    - how to create an informed strategy
    - get the details right

3. Makeing implementation happen 
    - strategic thinking with your team
    - measure your success
    - strategic thinking is an ongoing process
    - the limits of strategy


how to implement with your team 




FY20 monthly report - Oct
--------------------------
Libvirt CI requirement
    1. Enable libvirt CI to use nightly build as RHEL compose and update metadata accordingly
    2. Enable libvirt CI to set the testing env in resource host for migration test

Libvirt CI failure fix and Jenkins job maintains
    1. Update the runtime config for libvirt split modular deamon test
    2. Python3 migration for libvirt CI
        - Python3 migration for CI provision job
        - Python3 migration for jenkins-slave container image in openshift

Interview candidate of libvit automation QE

Debug and fix automation case jira issue

Libvirt-ci & micro-service PR review

take CI questions consulting for team members














FY20 monthly report - Sep
--------------------------
Libvirt CI requirement
    1. make a unique CI job config interface
    2. add job config interface to reserve beaker host with specific CPU flags
    3. update provision job env from python2 to python3

Libvirt CI failure fix and Jenkins job maintains
    1. debug and fix provision job failure
    2. create/fix the gitlab webhook for the image build task
    3. Disable auto trigger for s390x for acceptance and gating job
    4. job_trigger service fail to get the RHEL compose RTT message for RHEL7.9 and RHEL8.3
    5. RHEL7.9 runtest python-urllib3 error
    6. fail to run runtest job for multiarch machine

Interview candidate of libvit automation QE

Debug and fix automation case jira issue

Libvirt-ci & micro-service PR review

take CI questions consulting for team members


FY20 monthly report - Aug
--------------------------
Libvirt CI requirement

Libvirt CI failure fix and Jenkins job maintains
    - skip cpu_cores of beaker in ppc/s390 machines

combine the jobs.yaml in job_trigger and libvirt_ci into one file
    1. make libvirt-ci change - done
    2. combine the jobs.yaml of libvirt-ci and job_trigger to ci-shared-datas repo - done
    3. make job_trigger change - done
    4. update the document and docs in libvirt-ci - in process

Enable ci job for libvirt-python test on Fedora release
    1.  add libvirt-python job of fedora to jenkins - done
    - change libvirt-ci jobs.yaml to create libvirt-python job on Fedora - done

    2. enable image build job for Fedora - in process
    - provision job reserve machine from beaker - done
    - runtest job build guest image for Fedora - in process

    3. enable ci to run libvirt-python job on Fedora - not started
    - provision job reserve machine from beaker
    - runtest job install libvirt packages and run libvirt-python test

    4. create fedora latest package repo  - not started
    - enable brew-watcher service to scan and create latest libvirt packages for fedora CI test

    5.  update mirco-service job_trigger to auto-trigger libvirt-python test on Fedora - not started

Debug and fix automation case jira issue

Libvirt-ci & micro-service PR review

take CI questions consulting for team members


{"PROVISION_AV_COMPOSE_ID": "ADVANCED-VIRT-8.2.1-RHEL-8-20200825.0", "PROVISION_AV_COMPOSE_PATH": "/mnt/redhat/rhel-8/rel-eng/updates/ADVANCED-VIRT-8/ADVANCED-VIRT-8.2.1-RHEL-8-20200825.0"}

{"product": "Fedora", "bkr_info": {"distro_tags": ["nightly_composes"], "distro_name": "Fedora-Rawhide-20201112.n.0"}, "arches": ["x86_64"], "version": "34", "build": "Fedora-Rawhide-20201112.n.0"}

{"product": "RHEL", "bkr_info": {"distro_tags": ["RC-1.1"], "distro_name": "RHEL-8.3.0-20201009.2"}, "arches": ["aarch64", "x86_64", "s390x", "ppc64le"], "version": "8.3", "build": "RHEL-8.3.0-20201009.2"}


FY20 monthly report - July
--------------------------
Libvirt CI requirement
    - add add ci parameter to reserve the beaker machine with the minimum number of cpu cores
    - support to reserve two machines with different versions of RHEL
    - use virt-v2v to replace the libguestfs as the trigger package of v2v test in rhel8

Libvirt CI failure fix and Jenkins job maintains
    - debug and fix image build and tree signoff task auto
    - fix cross migration fails from RHEL-alt 7.6 to RHEL 7.8
    - debug and fix image build and tree signoff task auto
    - fix v2v rhel7.8.z acceptance testing failed
    - fix failure of cloning libvirt-ci from git.host
    - enable split daemon in resource host for migration test

add CI job for libvirt-python test on Fedora
    - add libvirt-python job of fedora to jenkins - done
    - create image build job for Fedora - done
    - enable ci to run libvirt-python job on Fedora - in process

Debug and fix automation case jira issue

Libvirt-ci & micro-service PR review

take CI questions consulting for team members





FY20 monthly report - June
--------------------------
Libvirt CI requirement
    - extend ci test case rerun function to make more test env detection and restore
    - support ci job interface to select libvirt service daemon/modular daemon
    - fix netxml define random failure

Libvirt CI failure fix and Jenkins job maintains
    - jenkins job fail to get the param enable_rdt
    - fix the TEIID db connection issue
    - fix auto trigger failure of ci RHEL compose

Tech talk about update of libvirt CI document

Debug and fix automation case jira issue

Libvirt-ci & micro-service PR review

take CI questions consulting for team members






FY20 monthly report - May
---------------------------


1. Libvirt CI requirement
    - Add support to provision 2 beaker host (same arch, but different cpu model, such as P8 and P9) for cross migration job
    - add "trigger event" in ci message to group ci jobs with the same event
    - send email notification for job owner and watcher when libvirt ci job finishes

2. Libvirt CI failure fix and Jenkins job maintains
    - check the gating_staging migration case failure
    - help to add python3-ovirt-engine-sdk4 into download repo
    - debug libvirt 8.3 virt module repo creation error
    - change the way of filterring out migration test and test with special hardware need from scheduler backend
    - rhel7.9 cases failed by missing pkgs: firewalld, glusterfs*

3. Debug and fix automation case jira issue
    - debug usb test case faulure and fix tp-libvirt test code issue

4. Interview with candidates for automation QE in Brno

5. Libvirt-ci & micro-service PR review

6. take CI questions consulting for team members



FY20 monthly report - March
---------------------------
1. Libvirt CI requirement
    - Enable libvirt repo to auto download packages to install ceph-common for ppc64le arch
    - Add --boot uefi option for virt-install for specific job.
    - ci new 8.3 jobs creation
    - Test a job with avocado running on python3/rhel7

2. libvirt CI failure fix and Jenkins job maintains
    - Correct the wrong repo link for RHEL-ALT on s390x
    - Fix aarch64 gating issue
    - change av compose signoff job to use the repo in US 
    - enable libvirt ci runtest job to reconnect github to get the avocado patch

3. debug and fix automation case jira issue
    - Resolve 6 issues

4. update libvirt ci document
    - How to manually trigger a job
    - How to manually trigger AV virt module test
    - How to manually trigger av_compose signoff test
    - How to manually trigger only_tree signoff test
    - How to manually trigger image_build job manually
    - How to manually trigger a job in different machines

5. Two intern candidates interview

6. Libvirt-ci & micro-service PR review

7. make preparation to share platform all hands meeting FY20Q1

FY20 goal wrap up
-----------------

libvirt automation case dev & bug fix
    - libvirt test case automation - 11
    - avocado project bug fix 3 + 2 + 3 + 2 
    - pr review
    - tp-libvirt automation case failure debug

Take CI team daily work
    1. New RHEL distro RTT passed 
        - make sure image build job is triggered and passed
        - trigger-by-tree signoff jobs are triggered without exception
        - make sure there are test results for all of the qe-consumption jobs(x86_64 acceptance jobs, lxc and npiv) (Please confirm with yanqzhan)
    2. New virt module is found
        - check module gating info email and osci web https://dashboard.osci.redhat.com/#/search/redhat-modules
        - gating jobs are triggered without exception
        - get the feature owner for failed test caes
    3. New virt module is found and core package is updated
        - test strategy - 1. config trigger-package param for the job in jobs.yaml of service job-trigger 2. the package is the core package(libvirt, libguestfs, libvirt-python and perl-Sys-Virt)
        - check new module arrival email
        - make sure the function jobs are triggered without exception
    4. New package(not a virt module package) build comes
        - test strategy - 1. config trigger-package param for the job in jobs.yaml of service job-trigger 2. the package is NOT in virt module
        - check new package email
        - make sure the functionn jos are triggered without exception
    5. New RHEL version get split, such as 8.2.0.z and 8.2.1 are coming
        - create a new product line for 8.2.0, such as in libvirt CI metadata/products and update the Brew Tag List for the line of 8.2
    6. Create new jenkins job when new RHEL version comes such as 8.3.

Libvirt CI new QE requirement - 28
    - collect new QE requirement and create trello card to track
    - micro-service & libvirt-ci coding

Libvirt CI issue fix - 30
    - fix issues found in libvirt jobs running
    - micro-service & libvirt-ci coding

microservice & libvirt-ci PR review
    - review PR and make sure every code aligned with the CI work logic

CI document update

take CI questions consulting for team members



Libvirt modular daemon
----------------------

libvirt daemon start/restart
    - ./libvirt_ci/data/playbooks/tasks/install_guest.yaml
    - ./libvirt_ci/data/playbooks/tasks/install_packages_beaker.yaml
    - ./libvirt_ci/data/playbooks/guest_image_builder.yaml
    - ./libvirt_ci/data/playbooks/prepare_gluster_server.yaml - done
    - ./libvirt_ci/data/playbooks/bootstrap_avocado_vt_remote.yaml done
    - ./libvirt_ci/data/playbooks/bootstrap_avocado_vt.yaml - done
    - ./libvirt_ci/runner/__init__.py: - prepare_run() - utils.restart_service('libvirtd') - done


    - ./libvirt_ci/runner/__init__.py: common_services = ['libvirtd', 'nfs', 'iscsid']


    


libvirt daemon log
    - ./libvirt_ci/runner/avocado_vt.py - def get_libvirtd_log
    - ./libvirt_ci/runner/__init__.py:    def get_libvirtd_log(self, test, result):



./libvirt_ci/state.py:        s_list = ['libvirtd', 'selinux', 'nfs', 'iscsid', 'tgtd']
./libvirt_ci/state.py:                '/etc/libvirt/libvirtd.conf',
./libvirt_ci/state.py:                '/etc/sysconfig/libvirtd',


install libvirt
    ./libvirt_ci/env/__init__.py:                cmd = ('yum -y install qemu-kvm qemu-img libvirt\\* '













    def prepare_data(cls):
        jobs_config_file = os.path.join(
            config.PATH, 'jobs.yaml')
        cls.pkg_rules = TriggerRules(['name', 'target', 'package', 'product',
                                      'arch', 'job_name', 'component'])
        cls.tree_rules = TriggerRules(['name', 'version', 'arch', 'location'])
        cls.av_compose_rules = TriggerRules(['name', 'product', 'version', 'arch'])
        # Iterate all jobs and put them into TriggerRules object
        for job in JobGenerator(jobs_config_file).jobs():
            trigger_packages = job.get('trigger-package')
            if isinstance(trigger_packages, (str, unicode)) and trigger_packages:
                trigger_packages = trigger_packages.splitlines()





